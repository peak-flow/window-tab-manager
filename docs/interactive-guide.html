<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrome Extension Interactive Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .code-block { background: #1e293b; }
        .syntax-js { color: #fbbf24; }
        .syntax-string { color: #34d399; }
        .syntax-comment { color: #6b7280; }
        .syntax-keyword { color: #f472b6; }
        .syntax-function { color: #60a5fa; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div x-data="extensionGuide()" class="min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-6">
                    <div class="flex items-center space-x-4">
                        <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold text-gray-900">Chrome Extension Guide</h1>
                            <p class="text-gray-600">Interactive guide to understanding our Window & Tab Manager</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button @click="toggleTheme()" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                            <svg x-show="!darkMode" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                            </svg>
                            <svg x-show="darkMode" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white border-b sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-8">
                    <template x-for="(section, index) in sections" :key="index">
                        <button 
                            @click="activeSection = index"
                            :class="activeSection === index ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                            class="py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors">
                            <span x-text="section.title"></span>
                        </button>
                    </template>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Section 1: Overview -->
            <div x-show="activeSection === 0" class="space-y-8">
                <div class="bg-white rounded-xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold mb-6">🎯 What is a Chrome Extension?</h2>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <p class="text-gray-600 mb-4">
                                A Chrome extension is a small program that customizes your browsing experience. 
                                Think of it as a plugin that can interact with Chrome's features.
                            </p>
                            <div class="space-y-3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span>Add new features to Chrome</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span>Interact with browser tabs and windows</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span>Store data locally</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                    <span>Add buttons to Chrome's toolbar</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-6">
                            <h3 class="font-semibold mb-4">Our Extension Architecture</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex items-center justify-between p-3 bg-white rounded border">
                                    <span class="font-medium">manifest.json</span>
                                    <span class="text-blue-600">Configuration</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-white rounded border">
                                    <span class="font-medium">background.js</span>
                                    <span class="text-green-600">Brain/Coordinator</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-white rounded border">
                                    <span class="font-medium">popup.html</span>
                                    <span class="text-purple-600">Quick UI</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-white rounded border">
                                    <span class="font-medium">manager.html</span>
                                    <span class="text-orange-600">Full UI</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Flow Diagram -->
                <div class="bg-white rounded-xl shadow-sm p-8">
                    <h3 class="text-xl font-semibold mb-6">🔄 Interactive Flow Demonstration</h3>
                    <div class="relative" x-data="{ step: 0, maxSteps: 4 }">
                        <div class="flex justify-center items-center space-x-8 mb-6">
                            <!-- User -->
                            <div :class="step >= 0 ? 'ring-4 ring-blue-500' : ''" class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center transition-all">
                                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                            
                            <!-- Arrow -->
                            <div :class="step >= 1 ? 'text-blue-500' : 'text-gray-300'" class="transition-colors">
                                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                                </svg>
                            </div>
                            
                            <!-- Popup -->
                            <div :class="step >= 1 ? 'ring-4 ring-green-500' : ''" class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center transition-all">
                                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                            
                            <!-- Arrow -->
                            <div :class="step >= 2 ? 'text-blue-500' : 'text-gray-300'" class="transition-colors">
                                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                                </svg>
                            </div>
                            
                            <!-- Background -->
                            <div :class="step >= 2 ? 'ring-4 ring-purple-500' : ''" class="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center transition-all">
                                <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                </svg>
                            </div>
                            
                            <!-- Arrow -->
                            <div :class="step >= 3 ? 'text-blue-500' : 'text-gray-300'" class="transition-colors">
                                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                                </svg>
                            </div>
                            
                            <!-- Chrome API -->
                            <div :class="step >= 3 ? 'ring-4 ring-yellow-500' : ''" class="w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center transition-all">
                                <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </div>
                        </div>
                        
                        <!-- Labels -->
                        <div class="flex justify-center items-center space-x-8 text-sm font-medium mb-6">
                            <span :class="step >= 0 ? 'text-blue-600' : 'text-gray-400'">User</span>
                            <span class="w-8"></span>
                            <span :class="step >= 1 ? 'text-green-600' : 'text-gray-400'">Popup</span>
                            <span class="w-8"></span>
                            <span :class="step >= 2 ? 'text-purple-600' : 'text-gray-400'">Background</span>
                            <span class="w-8"></span>
                            <span :class="step >= 3 ? 'text-yellow-600' : 'text-gray-400'">Chrome API</span>
                        </div>
                        
                        <!-- Controls -->
                        <div class="flex justify-center space-x-4">
                            <button @click="step = Math.max(0, step - 1)" :disabled="step === 0" class="px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed">
                                Previous
                            </button>
                            <button @click="step = Math.min(maxSteps, step + 1)" :disabled="step === maxSteps" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
                                Next
                            </button>
                            <button @click="step = 0" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700">
                                Reset
                            </button>
                        </div>
                        
                        <!-- Step Description -->
                        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                            <p x-show="step === 0" class="text-gray-700">👆 <strong>Step 1:</strong> User clicks the extension icon in Chrome toolbar</p>
                            <p x-show="step === 1" class="text-gray-700">📄 <strong>Step 2:</strong> Popup page loads and JavaScript initializes</p>
                            <p x-show="step === 2" class="text-gray-700">📨 <strong>Step 3:</strong> Popup sends message to background script requesting window data</p>
                            <p x-show="step === 3" class="text-gray-700">🔧 <strong>Step 4:</strong> Background script calls Chrome APIs to get tab/window information</p>
                            <p x-show="step === 4" class="text-gray-700">✅ <strong>Step 5:</strong> Data flows back through the chain and popup displays the windows/tabs</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Manifest -->
            <div x-show="activeSection === 1" class="space-y-8">
                <div class="bg-white rounded-xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold mb-6">📋 The Manifest File</h2>
                    <p class="text-gray-600 mb-6">
                        The manifest.json file is like your extension's ID card and permission slip. 
                        It tells Chrome what your extension can do and what resources it needs.
                    </p>
                    
                    <div class="grid lg:grid-cols-2 gap-8">
                        <!-- Code Example -->
                        <div>
                            <h3 class="font-semibold mb-4">Our Manifest File</h3>
                            <div class="code-block rounded-lg p-4 text-sm font-mono overflow-x-auto">
                                <div class="text-white">
                                    <span class="text-gray-400">{</span><br>
                                    &nbsp;&nbsp;<span class="syntax-string">"manifest_version"</span>: <span class="syntax-js">3</span>,<br>
                                    &nbsp;&nbsp;<span class="syntax-string">"name"</span>: <span class="syntax-string">"Window & Tab Manager"</span>,<br>
                                    &nbsp;&nbsp;<span class="syntax-string">"version"</span>: <span class="syntax-string">"1.0.0"</span>,<br>
                                    <br>
                                    &nbsp;&nbsp;<span class="syntax-string">"permissions"</span>: [<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-string">"tabs"</span>,<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-string">"storage"</span><br>
                                    &nbsp;&nbsp;],<br>
                                    <br>
                                    &nbsp;&nbsp;<span class="syntax-string">"background"</span>: {<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-string">"service_worker"</span>: <span class="syntax-string">"background.js"</span><br>
                                    &nbsp;&nbsp;},<br>
                                    <br>
                                    &nbsp;&nbsp;<span class="syntax-string">"action"</span>: {<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-string">"default_popup"</span>: <span class="syntax-string">"popup.html"</span><br>
                                    &nbsp;&nbsp;}<br>
                                    <span class="text-gray-400">}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Explanation -->
                        <div class="space-y-4">
                            <div class="border-l-4 border-blue-500 pl-4">
                                <h4 class="font-semibold text-blue-600">manifest_version: 3</h4>
                                <p class="text-sm text-gray-600">Uses the latest (and most secure) Chrome extension standard</p>
                            </div>
                            
                            <div class="border-l-4 border-green-500 pl-4">
                                <h4 class="font-semibold text-green-600">permissions: ["tabs", "storage"]</h4>
                                <p class="text-sm text-gray-600">
                                    <strong>tabs:</strong> Read tab URLs, titles, move/close tabs<br>
                                    <strong>storage:</strong> Save user preferences locally
                                </p>
                            </div>
                            
                            <div class="border-l-4 border-purple-500 pl-4">
                                <h4 class="font-semibold text-purple-600">background.service_worker</h4>
                                <p class="text-sm text-gray-600">The always-running script that coordinates everything</p>
                            </div>
                            
                            <div class="border-l-4 border-orange-500 pl-4">
                                <h4 class="font-semibold text-orange-600">action.default_popup</h4>
                                <p class="text-sm text-gray-600">The HTML page that opens when users click the extension icon</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Background Script -->
            <div x-show="activeSection === 2" class="space-y-8">
                <div class="bg-white rounded-xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold mb-6">🧠 Background Script (The Brain)</h2>
                    <p class="text-gray-600 mb-6">
                        The background script is like your extension's brain. It runs 24/7 and coordinates 
                        all communication between your UI and Chrome's features.
                    </p>
                    
                    <!-- Interactive Message Flow -->
                    <div x-data="{ selectedMessage: 'getAllWindows' }" class="mb-8">
                        <h3 class="font-semibold mb-4">Interactive Message Handling</h3>
                        <div class="grid lg:grid-cols-3 gap-6">
                            <!-- Message Types -->
                            <div>
                                <h4 class="font-medium mb-3">Available Actions</h4>
                                <div class="space-y-2">
                                    <template x-for="action in messageTypes" :key="action.name">
                                        <button 
                                            @click="selectedMessage = action.name"
                                            :class="selectedMessage === action.name ? 'bg-blue-50 border-blue-500 text-blue-700' : 'bg-white border-gray-200 text-gray-700 hover:bg-gray-50'"
                                            class="w-full text-left p-3 rounded-lg border transition-colors">
                                            <div class="font-medium" x-text="action.name"></div>
                                            <div class="text-sm text-gray-500" x-text="action.description"></div>
                                        </button>
                                    </template>
                                </div>
                            </div>
                            
                            <!-- Code Example -->
                            <div class="lg:col-span-2">
                                <h4 class="font-medium mb-3">Code Example</h4>
                                <div class="code-block rounded-lg p-4 text-sm font-mono overflow-x-auto">
                                    <template x-for="action in messageTypes" :key="action.name">
                                        <div x-show="selectedMessage === action.name" class="text-white">
                                            <div class="syntax-comment">// Message from UI component</div>
                                            <span class="syntax-keyword">const</span> message = {<br>
                                            &nbsp;&nbsp;action: <span class="syntax-string" x-text="'&quot;' + action.name + '&quot;'"></span>,<br>
                                            &nbsp;&nbsp;data: <span x-html="action.exampleData"></span><br>
                                            };<br><br>
                                            
                                            <div class="syntax-comment">// Background script handler</div>
                                            <span class="syntax-keyword">case</span> <span class="syntax-string" x-text="'&quot;' + action.name + '&quot;'"></span>:<br>
                                            &nbsp;&nbsp;<span x-html="action.code"></span><br>
                                            &nbsp;&nbsp;<span class="syntax-keyword">break</span>;
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Validation -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                        <h3 class="font-semibold text-yellow-800 mb-4">🔒 Security Validation</h3>
                        <p class="text-yellow-700 mb-4">Every message goes through multiple security checks:</p>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-white p-4 rounded border">
                                <div class="font-medium text-yellow-800">1. Sender Check</div>
                                <div class="text-sm text-yellow-600">Is this from our extension?</div>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <div class="font-medium text-yellow-800">2. Format Check</div>
                                <div class="text-sm text-yellow-600">Is the message structure valid?</div>
                            </div>
                            <div class="bg-white p-4 rounded border">
                                <div class="font-medium text-yellow-800">3. Data Check</div>
                                <div class="text-sm text-yellow-600">Are tab/window IDs valid numbers?</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: UI Components -->
            <div x-show="activeSection === 3" class="space-y-8">
                <div class="bg-white rounded-xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold mb-6">🖼️ UI Components</h2>
                    
                    <!-- Popup vs Manager Comparison -->
                    <div class="grid lg:grid-cols-2 gap-8 mb-8">
                        <!-- Popup -->
                        <div class="border-2 border-purple-200 rounded-lg p-6">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 110 2h-1v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6H3a1 1 0 110-2h4z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-xl font-semibold text-purple-600">Popup Interface</h3>
                            </div>
                            
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Size:</span>
                                    <span class="font-medium">400px width (fixed)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Behavior:</span>
                                    <span class="font-medium">Closes when clicking outside</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Best For:</span>
                                    <span class="font-medium">Quick actions</span>
                                </div>
                            </div>
                            
                            <div class="mt-4 p-3 bg-purple-50 rounded text-sm">
                                <strong>Features:</strong> View tabs, quick focus/close actions, "Open Manager" button
                            </div>
                        </div>
                        
                        <!-- Manager -->
                        <div class="border-2 border-blue-200 rounded-lg p-6">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-xl font-semibold text-blue-600">Manager Page</h3>
                            </div>
                            
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Size:</span>
                                    <span class="font-medium">Full browser tab</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Behavior:</span>
                                    <span class="font-medium">Stays open like any webpage</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Best For:</span>
                                    <span class="font-medium">Complex interactions</span>
                                </div>
                            </div>
                            
                            <div class="mt-4 p-3 bg-blue-50 rounded text-sm">
                                <strong>Features:</strong> Grid view, drag & drop, new window creation, modal confirmations
                            </div>
                        </div>
                    </div>

                    <!-- Drag and Drop Demo -->
                    <div x-data="dragDropDemo()" class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6">
                        <h3 class="font-semibold mb-4">🎯 Drag & Drop Simulation</h3>
                        <p class="text-gray-600 mb-4">Try dragging a tab between windows to see how it works!</p>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Window 1 -->
                            <div 
                                @drop.prevent="dropTab($event, 1)"
                                @dragover.prevent="dragOverWindow($event, 1)"
                                @dragleave.prevent="dragLeaveWindow($event, 1)"
                                :class="dragOverWindow1 ? 'ring-4 ring-blue-500 bg-blue-50' : 'bg-white'"
                                class="border-2 border-gray-200 rounded-lg p-4 transition-all">
                                <h4 class="font-medium mb-3">Window 1</h4>
                                <div class="space-y-2">
                                    <template x-for="(tab, index) in window1Tabs" :key="tab.id">
                                        <div 
                                            draggable="true"
                                            @dragstart="startDrag($event, tab.id, 1)"
                                            @dragend="endDrag($event)"
                                            :class="draggingTab === tab.id ? 'opacity-50 rotate-2' : ''"
                                            class="flex items-center space-x-3 p-3 bg-gray-50 rounded cursor-move hover:bg-gray-100 transition-all">
                                            <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
                                            <span x-text="tab.title"></span>
                                        </div>
                                    </template>
                                </div>
                            </div>
                            
                            <!-- Window 2 -->
                            <div 
                                @drop.prevent="dropTab($event, 2)"
                                @dragover.prevent="dragOverWindow($event, 2)"
                                @dragleave.prevent="dragLeaveWindow($event, 2)"
                                :class="dragOverWindow2 ? 'ring-4 ring-green-500 bg-green-50' : 'bg-white'"
                                class="border-2 border-gray-200 rounded-lg p-4 transition-all">
                                <h4 class="font-medium mb-3">Window 2</h4>
                                <div class="space-y-2">
                                    <template x-for="(tab, index) in window2Tabs" :key="tab.id">
                                        <div 
                                            draggable="true"
                                            @dragstart="startDrag($event, tab.id, 2)"
                                            @dragend="endDrag($event)"
                                            :class="draggingTab === tab.id ? 'opacity-50 rotate-2' : ''"
                                            class="flex items-center space-x-3 p-3 bg-gray-50 rounded cursor-move hover:bg-gray-100 transition-all">
                                            <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                                            <span x-text="tab.title"></span>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-3 bg-blue-50 rounded text-sm">
                            <strong>How it works:</strong> When you drag a tab, JavaScript captures the tab ID and target window, 
                            then sends a message to the background script which calls chrome.tabs.move() to actually move the tab.
                        </div>
                        
                        <button @click="resetDemo()" class="mt-3 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors">
                            Reset Demo
                        </button>
                    </div>
                </div>
            </div>

            <!-- Section 5: Chrome APIs -->
            <div x-show="activeSection === 4" class="space-y-8">
                <div class="bg-white rounded-xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold mb-6">🔧 Chrome APIs We Use</h2>
                    
                    <div class="grid lg:grid-cols-2 gap-8">
                        <!-- API Categories -->
                        <div x-data="{ selectedAPI: 'tabs' }">
                            <h3 class="font-semibold mb-4">API Categories</h3>
                            <div class="space-y-3 mb-6">
                                <template x-for="api in chromeAPIs" :key="api.name">
                                    <button 
                                        @click="selectedAPI = api.name"
                                        :class="selectedAPI === api.name ? 'bg-blue-50 border-blue-500 text-blue-700' : 'bg-white border-gray-200 text-gray-700 hover:bg-gray-50'"
                                        class="w-full text-left p-4 rounded-lg border transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <div class="text-2xl" x-text="api.icon"></div>
                                            <div>
                                                <div class="font-medium" x-text="api.name"></div>
                                                <div class="text-sm text-gray-500" x-text="api.description"></div>
                                            </div>
                                        </div>
                                    </button>
                                </template>
                            </div>
                            
                            <!-- API Methods -->
                            <div>
                                <h4 class="font-medium mb-3">Available Methods</h4>
                                <template x-for="api in chromeAPIs" :key="api.name">
                                    <div x-show="selectedAPI === api.name" class="space-y-2">
                                        <template x-for="method in api.methods" :key="method.name">
                                            <div class="p-3 bg-gray-50 rounded border">
                                                <div class="font-medium text-sm" x-text="method.name"></div>
                                                <div class="text-xs text-gray-600" x-text="method.description"></div>
                                            </div>
                                        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                        <!-- Code Examples -->
                        <div>
                            <h3 class="font-semibold mb-4">Code Examples</h3>
                            <div class="code-block rounded-lg p-4 text-sm font-mono overflow-x-auto">
                                <div class="text-white">
                                    <div class="syntax-comment">// Get all windows with tabs</div>
                                    <span class="syntax-keyword">const</span> windows = <span class="syntax-keyword">await</span> <span class="syntax-function">chrome.windows.getAll</span>({<br>
                                    &nbsp;&nbsp;populate: <span class="syntax-keyword">true</span><br>
                                    });<br><br>
                                    
                                    <div class="syntax-comment">// Close a specific tab</div>
                                    <span class="syntax-keyword">await</span> <span class="syntax-function">chrome.tabs.remove</span>(tabId);<br><br>
                                    
                                    <div class="syntax-comment">// Move tab to different window</div>
                                    <span class="syntax-keyword">await</span> <span class="syntax-function">chrome.tabs.move</span>(tabId, {<br>
                                    &nbsp;&nbsp;windowId: targetWindowId,<br>
                                    &nbsp;&nbsp;index: -1 <span class="syntax-comment">// -1 means end</span><br>
                                    });<br><br>
                                    
                                    <div class="syntax-comment">// Create new window</div>
                                    <span class="syntax-keyword">const</span> newWindow = <span class="syntax-keyword">await</span> <span class="syntax-function">chrome.windows.create</span>({<br>
                                    &nbsp;&nbsp;url: <span class="syntax-string">'https://example.com'</span>,<br>
                                    &nbsp;&nbsp;focused: <span class="syntax-keyword">true</span><br>
                                    });
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        function extensionGuide() {
            return {
                activeSection: 0,
                darkMode: false,
                sections: [
                    { title: '🎯 Overview' },
                    { title: '📋 Manifest' },
                    { title: '🧠 Background' },
                    { title: '🖼️ UI Components' },
                    { title: '🔧 Chrome APIs' }
                ],
                messageTypes: [
                    {
                        name: 'getAllWindows',
                        description: 'Fetch all browser windows and their tabs',
                        exampleData: '{}',
                        code: '<span class="syntax-keyword">await</span> <span class="syntax-function">chrome.windows.getAll</span>({ populate: <span class="syntax-keyword">true</span> });'
                    },
                    {
                        name: 'closeTab',
                        description: 'Close a specific tab by ID',
                        exampleData: '{ <span class="syntax-string">tabId</span>: <span class="syntax-js">123</span> }',
                        code: '<span class="syntax-keyword">await</span> <span class="syntax-function">chrome.tabs.remove</span>(data.tabId);'
                    },
                    {
                        name: 'moveTab',
                        description: 'Move a tab to a different window',
                        exampleData: '{ <span class="syntax-string">tabId</span>: <span class="syntax-js">123</span>, <span class="syntax-string">windowId</span>: <span class="syntax-js">456</span> }',
                        code: '<span class="syntax-keyword">await</span> <span class="syntax-function">chrome.tabs.move</span>(data.tabId, { windowId: data.windowId });'
                    },
                    {
                        name: 'focusTab',
                        description: 'Switch to and focus a specific tab',
                        exampleData: '{ <span class="syntax-string">tabId</span>: <span class="syntax-js">123</span> }',
                        code: '<span class="syntax-keyword">await</span> <span class="syntax-function">chrome.tabs.update</span>(data.tabId, { active: <span class="syntax-keyword">true</span> });'
                    }
                ],
                chromeAPIs: [
                    {
                        name: 'tabs',
                        icon: '📑',
                        description: 'Manage individual browser tabs',
                        methods: [
                            { name: 'chrome.tabs.get()', description: 'Get information about a specific tab' },
                            { name: 'chrome.tabs.create()', description: 'Create a new tab' },
                            { name: 'chrome.tabs.remove()', description: 'Close one or more tabs' },
                            { name: 'chrome.tabs.move()', description: 'Move tabs to different positions or windows' },
                            { name: 'chrome.tabs.update()', description: 'Modify tab properties (URL, active status, etc.)' }
                        ]
                    },
                    {
                        name: 'windows',
                        icon: '🪟',
                        description: 'Manage browser windows',
                        methods: [
                            { name: 'chrome.windows.getAll()', description: 'Get all browser windows' },
                            { name: 'chrome.windows.create()', description: 'Create a new window' },
                            { name: 'chrome.windows.remove()', description: 'Close a window' },
                            { name: 'chrome.windows.update()', description: 'Focus or modify window properties' }
                        ]
                    },
                    {
                        name: 'runtime',
                        icon: '⚡',
                        description: 'Extension runtime and messaging',
                        methods: [
                            { name: 'chrome.runtime.sendMessage()', description: 'Send messages between extension components' },
                            { name: 'chrome.runtime.onMessage', description: 'Listen for messages from other components' },
                            { name: 'chrome.runtime.getURL()', description: 'Get URLs for extension resources' }
                        ]
                    },
                    {
                        name: 'storage',
                        icon: '💾',
                        description: 'Store and retrieve user data',
                        methods: [
                            { name: 'chrome.storage.local.set()', description: 'Save data locally' },
                            { name: 'chrome.storage.local.get()', description: 'Retrieve saved data' },
                            { name: 'chrome.storage.sync.set()', description: 'Save data with cross-device sync' }
                        ]
                    }
                ],
                toggleTheme() {
                    this.darkMode = !this.darkMode;
                }
            }
        }

        function dragDropDemo() {
            return {
                window1Tabs: [
                    { id: 1, title: 'Google Search' },
                    { id: 2, title: 'GitHub Repository' },
                    { id: 3, title: 'Stack Overflow' }
                ],
                window2Tabs: [
                    { id: 4, title: 'YouTube Video' },
                    { id: 5, title: 'Chrome Extensions' }
                ],
                draggingTab: null,
                dragOverWindow1: false,
                dragOverWindow2: false,
                
                startDrag(event, tabId, fromWindow) {
                    this.draggingTab = tabId;
                    event.dataTransfer.setData('text/plain', JSON.stringify({ tabId, fromWindow }));
                },
                
                endDrag(event) {
                    this.draggingTab = null;
                    this.dragOverWindow1 = false;
                    this.dragOverWindow2 = false;
                },
                
                dragOverWindow(event, windowId) {
                    if (windowId === 1) this.dragOverWindow1 = true;
                    if (windowId === 2) this.dragOverWindow2 = true;
                },
                
                dragLeaveWindow(event, windowId) {
                    if (windowId === 1) this.dragOverWindow1 = false;
                    if (windowId === 2) this.dragOverWindow2 = false;
                },
                
                dropTab(event, toWindow) {
                    const data = JSON.parse(event.dataTransfer.getData('text/plain'));
                    const { tabId, fromWindow } = data;
                    
                    if (fromWindow === toWindow) return;
                    
                    // Find and move the tab
                    let tab;
                    if (fromWindow === 1) {
                        const index = this.window1Tabs.findIndex(t => t.id === tabId);
                        tab = this.window1Tabs.splice(index, 1)[0];
                    } else {
                        const index = this.window2Tabs.findIndex(t => t.id === tabId);
                        tab = this.window2Tabs.splice(index, 1)[0];
                    }
                    
                    if (toWindow === 1) {
                        this.window1Tabs.push(tab);
                    } else {
                        this.window2Tabs.push(tab);
                    }
                    
                    this.dragOverWindow1 = false;
                    this.dragOverWindow2 = false;
                    this.draggingTab = null;
                },
                
                resetDemo() {
                    this.window1Tabs = [
                        { id: 1, title: 'Google Search' },
                        { id: 2, title: 'GitHub Repository' },
                        { id: 3, title: 'Stack Overflow' }
                    ];
                    this.window2Tabs = [
                        { id: 4, title: 'YouTube Video' },
                        { id: 5, title: 'Chrome Extensions' }
                    ];
                    this.draggingTab = null;
                    this.dragOverWindow1 = false;
                    this.dragOverWindow2 = false;
                }
            }
        }
    </script>
</body>
</html>